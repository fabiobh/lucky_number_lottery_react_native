# Fastfile for Lucky Number Bingo Community

default_platform(:ios)

platform :ios do
  desc "Download app metadata from App Store Connect"
  lane :download_metadata do |options|
    username = options[:username] || ENV["FASTLANE_USER"] || "sabrinaaridi@hotmail.com"
    
    deliver(
      username: username,
      app_identifier: "com.uaialternativa.luckydraw",
      skip_binary_upload: true,
      skip_screenshots: true,
      run_precheck_before_submit: false,
      force: true
    )
  end
  
  desc "Initialize metadata folder structure"
  lane :init_metadata do
    sh("fastlane deliver init --app_identifier com.uaialternativa.luckydraw")
  end
  
  desc "Upload app metadata to App Store Connect"
  lane :upload_metadata do |options|
    username = options[:username] || ENV["FASTLANE_USER"] || "sabrinaaridi@hotmail.com"
    
    deliver(
      username: username,
      app_identifier: "com.uaialternativa.luckydraw",
      skip_binary_upload: true,
      skip_screenshots: true,
      skip_app_version_update: true,
      force: true,
      submit_for_review: false
    )
  end
  
  desc "Translate metadata from en-US to all other languages"
  lane :translate_metadata do
    sh("python3 translate_metadata.py")
  end
end
